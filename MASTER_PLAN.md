# MASTER PLAN ‚Äì K·∫æ HO·∫†CH HO√ÄN THI·ªÜN 100% 1Beauty.asia

**‚ö†Ô∏è QUAN TR·ªåNG: ƒê√¢y l√† "x∆∞∆°ng s·ªëng" tri·ªÉn khai, KH√îNG ƒê∆Ø·ª¢C L√ÄM L·ªÜCH TH·ª® T·ª∞**

**Ng√†y t·∫°o:** $(date)  
**Version:** 1.0  
**Tr·∫°ng th√°i:** ƒêang tri·ªÉn khai

---

## üö® CAM K·∫æT NGUY√äN T·∫ÆC (R·∫§T QUAN TR·ªåNG ‚Äì CH·ªêT NGAY)

**‚ö†Ô∏è ƒê·ªåC K·ª∏ PH·∫¶N N√ÄY TR∆Ø·ªöC KHI B·∫ÆT ƒê·∫¶U B·∫§T K·ª≤ M·ª§C N√ÄO**

M√¨nh ƒë·ªìng √Ω 100% v√† cam k·∫øt gi·ªØ tuy·ªát ƒë·ªëi c√°c nguy√™n t·∫Øc sau, t·ª´ ƒë·∫ßu ƒë·∫øn cu·ªëi d·ª± √°n:

### ‚úÖ CAM K·∫æT TUY·ªÜT ƒê·ªêI

1. **KH√îNG LAN MAN ‚Äì KH√îNG R·∫º NH√ÅNH**
   - Ch·ªâ l√†m ƒë√∫ng nh·ªØng g√¨ trong Master Plan
   - Kh√¥ng t·ª± √Ω th√™m features ngo√†i k·∫ø ho·∫°ch
   - Kh√¥ng l√†m c√°c m·ª•c kh√¥ng li√™n quan

2. **ƒêI ƒê√öNG TH·ª® T·ª∞ A ‚Üí B ‚Üí C ‚Üí D ‚Üí E ‚Üí F ‚Üí G ‚Üí H**
   - Ph·∫£i ho√†n th√†nh Ph·∫ßn A tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu Ph·∫ßn B
   - Ph·∫£i ho√†n th√†nh t·∫•t c·∫£ m·ª•c trong m·ªôt ph·∫ßn tr∆∞·ªõc khi chuy·ªÉn ph·∫ßn
   - Kh√¥ng ƒë∆∞·ª£c nh·∫£y c√≥c, b·ªè qua m·ª•c n√†o

3. **M·ªñI M·ª§C = HO√ÄN THI·ªÜN 100% ‚Üí KI·ªÇM TRA ‚Üí CH·ªêT ‚Üí M·ªöI ƒê∆Ø·ª¢C QUA**
   - M·ªói m·ª•c ph·∫£i ho√†n thi·ªán 100% tr∆∞·ªõc khi chuy·ªÉn m·ª•c ti·∫øp theo
   - Ph·∫£i ki·ªÉm tra k·ªπ l∆∞·ª°ng sau khi ho√†n th√†nh
   - Ph·∫£i ch·ªët v√† ƒë√°nh d·∫•u ho√†n th√†nh tr∆∞·ªõc khi ti·∫øp t·ª•c

4. **KH√îNG C·∫ÆT NG·∫ÆN ‚Äì KH√îNG R√öT G·ªåN SAU V√ÄI PHI√äN CHAT**
   - Kh√¥ng ƒë∆∞·ª£c r√∫t g·ªçn scope v√¨ "m·ªát" ho·∫∑c "l√¢u"
   - Kh√¥ng ƒë∆∞·ª£c b·ªè qua deliverables
   - Ph·∫£i l√†m ƒë·∫ßy ƒë·ªß nh∆∞ ƒë√£ ƒë·ªãnh nghƒ©a

5. **KH√îNG "T·∫†M ƒê∆Ø·ª¢C" ‚Äì KH√îNG TODO ‚Äì KH√îNG PLACEHOLDER**
   - Kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ code t·∫°m
   - Kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ TODO comments
   - Kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ placeholder functions
   - M·ªçi th·ª© ph·∫£i ho√†n ch·ªânh, ch·∫°y ƒë∆∞·ª£c

6. **KH√îNG ƒê·ªÇ AI (K·ªÇ C·∫¢ CURSOR) L√ÅI K·∫æ HO·∫†CH**
   - Ch·ªâ l√†m theo Master Plan
   - N·∫øu AI ƒë·ªÅ xu·∫•t ƒëi·ªÅu g√¨ ngo√†i k·∫ø ho·∫°ch ‚Üí t·ª´ ch·ªëi
   - N·∫øu AI mu·ªën thay ƒë·ªïi th·ª© t·ª± ‚Üí t·ª´ ch·ªëi

7. **M·ªåI QUY·∫æT ƒê·ªäNH CU·ªêI C√ôNG PH·∫¢I PH√ô H·ª¢P MASTER PLAN**
   - M·ªçi thay ƒë·ªïi ph·∫£i ƒë∆∞·ª£c review v·ªõi Master Plan
   - N·∫øu conflict ‚Üí ∆∞u ti√™n Master Plan
   - N·∫øu c·∫ßn thay ƒë·ªïi Master Plan ‚Üí ph·∫£i ƒë∆∞·ª£c approve tr∆∞·ªõc

---

## üîÅ EXECUTION PROTOCOL (QUY TR√åNH TRI·ªÇN KHAI B·∫ÆT BU·ªòC)

**‚ö†Ô∏è √ÅP D·ª§NG CHO T·ª™NG M·ª§C NH·ªé (v√≠ d·ª•: A2.1, A2.2, A3.1‚Ä¶)**

M·ªói m·ª•c ƒë·ªÅu ph·∫£i ƒëi theo chu k·ª≥ 6 b∆∞·ªõc sau. **KH√îNG ƒê∆Ø·ª¢C B·ªé QUA B∆Ø·ªöC N√ÄO.**

### 1Ô∏è‚É£ PH√ÇN T√çCH HI·ªÜN TR·∫†NG (READ-ONLY)

**M·ª•c ƒë√≠ch:** Hi·ªÉu r√µ t√¨nh tr·∫°ng hi·ªán t·∫°i tr∆∞·ªõc khi l√†m g√¨

**Quy t·∫Øc:**
- ‚ùå KH√îNG code
- ‚ùå KH√îNG s·ª≠a
- ‚ùå KH√îNG ƒë·ªÅ xu·∫•t gi·∫£i ph√°p v·ªôi
- ‚úÖ CH·ªà ƒë·ªçc, ph√¢n t√≠ch, li·ªát k√™

**C√¢u h·ªèi ph·∫£i tr·∫£ l·ªùi:**
- ƒêang c√≥ g√¨?
- File n√†o li√™n quan?
- B·∫£ng/c·ªôt n√†o trong database?
- Code hi·ªán t·∫°i nh∆∞ th·∫ø n√†o?
- R·ªßi ro g√¨ c√≥ th·ªÉ x·∫£y ra?
- C√≥ conflict g√¨ kh√¥ng?

**üëâ N·∫øu ch∆∞a xong b∆∞·ªõc n√†y ‚Üí KH√îNG ƒê∆Ø·ª¢C l√†m b∆∞·ªõc 2**

**Output:** B√°o c√°o hi·ªán tr·∫°ng (c√≥ th·ªÉ vi·∫øt ng·∫Øn g·ªçn, nh∆∞ng ph·∫£i ƒë·∫ßy ƒë·ªß)

---

### 2Ô∏è‚É£ ƒê·ªäNH NGHƒ®A "HO√ÄN THI·ªÜN 100%" (DEFINITION OF DONE)

**M·ª•c ƒë√≠ch:** X√°c ƒë·ªãnh r√µ r√†ng khi n√†o g·ªçi l√† XONG

**Quy t·∫Øc:**
- Ph·∫£i vi·∫øt r√µ, c·ª• th·ªÉ
- C√≥ th·ªÉ ƒëo l∆∞·ªùng ƒë∆∞·ª£c
- C√≥ th·ªÉ verify ƒë∆∞·ª£c

**C√¢u h·ªèi ph·∫£i tr·∫£ l·ªùi:**
- Khi n√†o g·ªçi l√† XONG?
- Output b·∫Øt bu·ªôc l√† g√¨?
- File n√†o ph·∫£i t·ªìn t·∫°i?
- Test n√†o ph·∫£i pass?
- Checklist n√†o ph·∫£i ƒë·∫ßy ƒë·ªß?
- C√≥ SQL n√†o c·∫ßn t·∫°o kh√¥ng?
- C√≥ documentation n√†o c·∫ßn vi·∫øt kh√¥ng?

**üëâ Kh√¥ng r√µ "xong l√† g√¨" ‚Üí KH√îNG ƒê∆Ø·ª¢C code**

**Output:** Definition of Done cho m·ª•c n√†y (vi·∫øt r√µ r√†ng, c·ª• th·ªÉ)

---

### 3Ô∏è‚É£ CHECKLIST K·ª∏ THU·∫¨T (LOCK SCOPE)

**M·ª•c ƒë√≠ch:** X√°c ƒë·ªãnh r√µ ph·∫°m vi c√¥ng vi·ªác, tr√°nh l√†m lan man

**Quy t·∫Øc:**
- Li·ªát k√™ T·∫§T C·∫¢ vi·ªác c·∫ßn l√†m
- Li·ªát k√™ T·∫§T C·∫¢ vi·ªác KH√îNG ƒë∆∞·ª£c l√†m
- Lock scope - kh√¥ng m·ªü r·ªông

**Checklist ph·∫£i c√≥:**
- ‚úÖ Danh s√°ch vi·ªác ƒë∆∞·ª£c ph√©p l√†m
- ‚ùå Danh s√°ch vi·ªác c·∫•m l√†m
- üìù Files s·∫Ω ƒë∆∞·ª£c t·∫°o/s·ª≠a
- üóÑÔ∏è Database changes (n·∫øu c√≥)
- üß™ Tests c·∫ßn l√†m (n·∫øu c√≥)

**üëâ C√°i g√¨ ngo√†i checklist ‚Üí KH√îNG ƒê∆Ø·ª¢C ƒê·ª§NG**

**Output:** Checklist k·ªπ thu·∫≠t (c√≥ th·ªÉ d√πng format trong Master Plan, nh∆∞ng ph·∫£i c·ª• th·ªÉ h√≥a)

---

### 4Ô∏è‚É£ CH·ªà TH·ªä CHO CURSOR (PROMPT CH√çNH TH·ª®C)

**M·ª•c ƒë√≠ch:** ƒê∆∞a ra ch·ªâ th·ªã r√µ r√†ng, kh√¥ng v√≤ng vo

**Quy t·∫Øc:**
- 1 prompt duy nh·∫•t, r√µ r√†ng
- Kh√¥ng v√≤ng vo
- Kh√¥ng m·ªü r·ªông
- Kh√¥ng "t·ª± suy lu·∫≠n th√™m"
- D·ª±a tr√™n b∆∞·ªõc 1, 2, 3

**Prompt ph·∫£i bao g·ªìm:**
- M·ª•c ti√™u c·ª• th·ªÉ
- Scope (t·ª´ checklist)
- Definition of Done
- Constraints (t·ª´ Master Plan)
- Deliverables mong ƒë·ª£i

**Output:** Prompt s·∫µn s√†ng ƒë·ªÉ g·ª≠i cho Cursor/AI

---

### 5Ô∏è‚É£ KI·ªÇM TRA ‚Äì SOI L·ªñI ‚Äì CH·ªêT

**M·ª•c ƒë√≠ch:** ƒê·∫£m b·∫£o output ƒë√∫ng nh∆∞ mong ƒë·ª£i

**Quy t·∫Øc:**
- Ph·∫£i ki·ªÉm tra k·ªπ l∆∞·ª°ng
- Soi l·ªói nghi√™m ng·∫∑t
- Ch·ªâ ch·ªët khi th·ª±c s·ª± ho√†n th√†nh

**Checklist ki·ªÉm tra:**
- ‚úÖ ƒê·ªëi chi·∫øu v·ªõi Master Plan
- ‚úÖ ƒê·ªëi chi·∫øu v·ªõi Definition of Done
- ‚úÖ ƒê·ªëi chi·∫øu v·ªõi Checklist k·ªπ thu·∫≠t
- ‚úÖ Test (n·∫øu c√≥)
- ‚úÖ Code review (n·∫øu c√≥)
- ‚úÖ Documentation (n·∫øu c√≥)

**N·∫øu:**
- ‚ùå SAI ‚Üí quay l·∫°i b∆∞·ªõc 4 (c√≥ th·ªÉ c·∫ßn ƒëi·ªÅu ch·ªânh prompt)
- ‚úÖ ƒê√öNG ‚Üí ƒê√ÅNH D·∫§U HO√ÄN TH√ÄNH

**Output:** K·∫øt qu·∫£ ki·ªÉm tra (Pass/Fail) + L√Ω do

---

### 6Ô∏è‚É£ GHI NH·∫¨N TI·∫æN ƒê·ªò

**M·ª•c ƒë√≠ch:** C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô v√† ƒë√°nh d·∫•u m·ª•c ƒë√£ ho√†n th√†nh

**Quy t·∫Øc:**
- C·∫≠p nh·∫≠t ngay sau khi ch·ªët
- Kh√¥ng ƒë∆∞·ª£c qu√™n
- Ph·∫£i ƒë·∫ßy ƒë·ªß th√¥ng tin

**N·ªôi dung c·∫≠p nh·∫≠t:**
- ƒê√°nh d·∫•u checkbox trong `TIEN_DO_HOAN_THIEN.md`
- Ghi ng√†y ho√†n th√†nh
- Ghi ng∆∞·ªùi th·ª±c hi·ªán (n·∫øu c√≥)
- Ghi ghi ch√∫ (n·∫øu c√≥)
- List deliverables ƒë√£ t·∫°o
- Ch·ªët: "M·ª§C N√ÄY ƒê√É ƒê√ìNG ‚Äì KH√îNG ƒê∆Ø·ª¢C S·ª¨A L·∫†I TR·ª™ KHI C√ì BUG NGHI√äM TR·ªåNG"

**Output:** File `TIEN_DO_HOAN_THIEN.md` ƒë∆∞·ª£c c·∫≠p nh·∫≠t

---

## ‚ö†Ô∏è L∆ØU √ù QUAN TR·ªåNG

1. **M·ªói m·ª•c ph·∫£i ƒëi qua ƒë·ªß 6 b∆∞·ªõc tr√™n**
2. **Kh√¥ng ƒë∆∞·ª£c b·ªè qua b∆∞·ªõc n√†o, d√π c√≥ v·∫ª "nh·ªè"**
3. **N·∫øu th·∫•y m√¨nh ƒëang l√†m sai quy tr√¨nh ‚Üí D·ª™NG L·∫†I v√† l√†m l·∫°i ƒë√∫ng**
4. **N·∫øu AI (Cursor) ƒë·ªÅ xu·∫•t b·ªè qua b∆∞·ªõc n√†o ‚Üí T·ª™ CH·ªêI**
5. **N·∫øu AI mu·ªën l√†m nhanh, r√∫t g·ªçn ‚Üí T·ª™ CH·ªêI**
6. **Lu√¥n ƒë·ªëi chi·∫øu v·ªõi Master Plan tr∆∞·ªõc khi quy·∫øt ƒë·ªãnh**

---

## üìã QUY T·∫ÆC TRI·ªÇN KHAI (T√ìM T·∫ÆT)

1. **Th·ª© t·ª± b·∫Øt bu·ªôc:** Ph·∫£i l√†m theo th·ª© t·ª± A ‚Üí B ‚Üí C ‚Üí D ‚Üí E ‚Üí F ‚Üí G ‚Üí H
2. **Ho√†n thi·ªán 100%:** M·ªói m·ª•c ph·∫£i ho√†n thi·ªán 100%, KH√îNG ƒë∆∞·ª£c ƒë·ªÉ placeholder, TODO, ho·∫∑c code t·∫°m
3. **SQL ƒë·∫ßy ƒë·ªß:** N·∫øu c·∫ßn SQL, ph·∫£i cung c·∫•p SQL ho√†n ch·ªânh, test ƒë∆∞·ª£c
4. **B√°o c√°o ti·∫øn ƒë·ªô:** M·ªói m·ª•c ho√†n th√†nh ph·∫£i c·∫≠p nh·∫≠t v√†o `TIEN_DO_HOAN_THIEN.md`
5. **Database th·∫≠t:** T·∫•t c·∫£ database ph·∫£i ho√†n thi·ªán 100% ƒë·ªÉ v·∫≠n h√†nh th·∫≠t s·ª±
6. **B√°o l·ªói:** N·∫øu ph√°t hi·ªán sai s√≥t t·ª´ AI, ph·∫£i b√°o l·∫°i ngay
7. **Execution Protocol:** M·ªói m·ª•c ph·∫£i ƒëi qua ƒë·ªß 6 b∆∞·ªõc (Ph√¢n t√≠ch ‚Üí ƒê·ªãnh nghƒ©a ‚Üí Checklist ‚Üí Ch·ªâ th·ªã ‚Üí Ki·ªÉm tra ‚Üí Ghi nh·∫≠n)

---

## PH·∫¶N A ‚Äì N·ªÄN M√ìNG B·∫ÆT BU·ªòC (KH√îNG ƒê∆Ø·ª¢C L√ÄM SAI)

### A1. Chu·∫©n h√≥a ki·∫øn tr√∫c & nguy√™n t·∫Øc tri·ªÉn khai

**M·ª•c ti√™u:** X√¢y d·ª±ng quy ∆∞·ªõc v√† tri·∫øt l√Ω l√†m n·ªÅn t·∫£ng cho to√†n b·ªô d·ª± √°n

**Danh m·ª•c:**

- [ ] **A1.1** ƒê·ªãnh nghƒ©a quy ∆∞·ªõc:
  - [ ] `frontend ‚Üî backend ‚Üî database` data flow
  - [ ] Data ownership (ai s·ªü h·ªØu data n√†o)
  - [ ] Role & permission model
  - [ ] Single source of truth

- [ ] **A1.2** Ch·ªët tri·∫øt l√Ω:
  - [ ] Supabase l√† backend duy nh·∫•t
  - [ ] Kh√¥ng bypass RLS
  - [ ] Kh√¥ng hardcode role ·ªü frontend
  - [ ] Document tri·∫øt l√Ω trong file `ARCHITECTURE.md`

**‚ö†Ô∏è C·∫¢NH B√ÅO:** N·∫øu b·ªè qua A1 ‚Üí d·ª± √°n s·∫Ω n√°t v·ªÅ sau

---

### A2. Chu·∫©n h√≥a DATABASE SCHEMA (CONSOLIDATION)

**M·ª•c ti√™u:** Ch·ªâ t·ªìn t·∫°i 1 schema chu·∫©n, kh√¥ng c√≤n SQL r·ªùi r·∫°c g√¢y xung ƒë·ªôt

**Danh m·ª•c:**

- [ ] **A2.1** Audit v√† li·ªát k√™ t·∫•t c·∫£ SQL files:
  - [ ] `supabase_new_schema.sql`
  - [ ] `supabase_schema.sql`
  - [ ] T·∫•t c·∫£ files trong `supabase/migrations/`
  - [ ] T·∫•t c·∫£ `fix_*.sql` files
  - [ ] T·∫•t c·∫£ `optimize_*.sql` files
  - [ ] T·∫•t c·∫£ `seed_*.sql` files
  - [ ] T·∫•t c·∫£ `setup_*.sql` files

- [ ] **A2.2** Consolidate schema:
  - [ ] T·∫°o file `database/schema_v1.0.sql` - Schema duy nh·∫•t, chu·∫©n
  - [ ] Merge t·∫•t c·∫£ changes t·ª´ c√°c file r·ªùi r·∫°c
  - [ ] Resolve conflicts
  - [ ] ƒê·∫£m b·∫£o kh√¥ng m·∫•t data/structure n√†o

- [ ] **A2.3** Chu·∫©n h√≥a naming:
  - [ ] Table naming convention
  - [ ] Column naming convention (snake_case)
  - [ ] Enum naming convention
  - [ ] Index naming convention
  - [ ] Foreign key naming convention

- [ ] **A2.4** ƒê·ªãnh nghƒ©a foreign keys & cascade rules:
  - [ ] Li·ªát k√™ t·∫•t c·∫£ foreign keys
  - [ ] Quy·∫øt ƒë·ªãnh ON DELETE CASCADE/NO ACTION/SET NULL
  - [ ] Quy·∫øt ƒë·ªãnh ON UPDATE rules
  - [ ] Document trong schema

- [ ] **A2.5** Freeze schema v1.0:
  - [ ] Review to√†n b·ªô schema
  - [ ] Test schema tr√™n local Supabase
  - [ ] T·∫°o file `database/schema_v1.0_FINAL.sql`
  - [ ] Archive c√°c file SQL c≈© v√†o `database/archive/`
  - [ ] Update README v·ªõi schema v1.0

**Deliverables:**
- `database/schema_v1.0_FINAL.sql` - Schema ho√†n ch·ªânh, test ƒë∆∞·ª£c
- `database/migrations/` - Migrations chu·∫©n h√≥a (n·∫øu c·∫ßn)
- Document schema trong `database/README.md`

---

### A3. RLS & SECURITY AUDIT (C·ª∞C K·ª≤ QUAN TR·ªåNG)

**M·ª•c ti√™u:** Kh√¥ng user n√†o ƒë·ªçc/ghi ƒë∆∞·ª£c d·ªØ li·ªáu kh√¥ng thu·ªôc quy·ªÅn

**Danh m·ª•c:**

- [ ] **A3.1** Audit RLS cho m·ªói b·∫£ng:
  - [ ] `businesses`
  - [ ] `services`
  - [ ] `deals`
  - [ ] `team_members`
  - [ ] `media_items`
  - [ ] `reviews`
  - [ ] `blog_posts`
  - [ ] `business_blog_posts`
  - [ ] `profiles`
  - [ ] `registration_requests`
  - [ ] `orders`
  - [ ] `appointments`
  - [ ] `support_tickets`
  - [ ] `admin_users`
  - [ ] C√°c b·∫£ng kh√°c (homepage_data, page_content, app_settings, announcements, membership_packages)

- [ ] **A3.2** Policy cho m·ªói operation:
  - [ ] SELECT policies (public data vs private data)
  - [ ] INSERT policies (ai ƒë∆∞·ª£c insert)
  - [ ] UPDATE policies (ai ƒë∆∞·ª£c update)
  - [ ] DELETE policies (ai ƒë∆∞·ª£c delete)

- [ ] **A3.3** Role-based policies:
  - [ ] Anonymous users
  - [ ] Logged-in users
  - [ ] Business owners (ch·ªâ ƒë∆∞·ª£c modify business c·ªßa m√¨nh)
  - [ ] Admin users (full access v·ªõi ƒëi·ªÅu ki·ªán)
  - [ ] Staff members (future)

- [ ] **A3.4** Security audit:
  - [ ] Privilege escalation prevention
  - [ ] Public data vs private data boundary
  - [ ] Cross-tenant data leak prevention
  - [ ] SQL injection prevention (Supabase handles, nh∆∞ng c·∫ßn verify)

- [ ] **A3.5** Test matrix:
  - [ ] Test v·ªõi anonymous user
  - [ ] Test v·ªõi logged-in user
  - [ ] Test v·ªõi business owner (ch·ªâ business c·ªßa m√¨nh)
  - [ ] Test v·ªõi business owner (business c·ªßa ng∆∞·ªùi kh√°c) ‚Üí ph·∫£i block
  - [ ] Test v·ªõi admin
  - [ ] Test v·ªõi moderator
  - [ ] Test v·ªõi editor

- [ ] **A3.6** T·∫°o RLS policies file:
  - [ ] `database/rls_policies_v1.0.sql` - T·∫•t c·∫£ RLS policies
  - [ ] Document t·ª´ng policy
  - [ ] Test script ƒë·ªÉ verify policies

**Deliverables:**
- `database/rls_policies_v1.0.sql` - RLS policies ho√†n ch·ªânh
- `database/rls_test_script.sql` - Test script
- Document policies trong `database/SECURITY.md`

---

### A4. STORAGE & MEDIA SECURITY

**M·ª•c ti√™u:** Setup storage buckets v√† policies an to√†n

**Danh m·ª•c:**

- [ ] **A4.1** Chu·∫©n h√≥a buckets:
  - [ ] `business-images` - H√¨nh ·∫£nh businesses
  - [ ] `business-logos` - Logos c·ªßa businesses
  - [ ] `media-gallery` - Media items (gallery)
  - [ ] `user-avatars` - User avatars
  - [ ] `blog-images` - Blog images
  - [ ] T·∫°o SQL script ƒë·ªÉ t·∫°o buckets (n·∫øu c√≥ th·ªÉ) ho·∫∑c document manual steps

- [ ] **A4.2** Storage policies (upload):
  - [ ] Ai ƒë∆∞·ª£c upload v√†o bucket n√†o?
  - [ ] Size limits
  - [ ] File type restrictions
  - [ ] Path restrictions (v√≠ d·ª•: `business-images/{business_id}/*`)

- [ ] **A4.3** Storage policies (download/view):
  - [ ] Public images (ai c≈©ng xem ƒë∆∞·ª£c)
  - [ ] Private images (ch·ªâ owner/admin xem ƒë∆∞·ª£c)
  - [ ] Business images (public nh∆∞ng path c√≥ business_id)
  - [ ] User avatars (public ho·∫∑c private)

- [ ] **A4.4** Path structure:
  - [ ] `business-images/{business_id}/{filename}`
  - [ ] `business-logos/{business_id}/{filename}`
  - [ ] `media-gallery/{business_id}/{filename}`
  - [ ] `user-avatars/{user_id}/{filename}`
  - [ ] `blog-images/{blog_id}/{filename}`
  - [ ] Tr√°nh leak file qua path guessing

- [ ] **A4.5** Image optimization flow:
  - [ ] Upload ‚Üí Optimize ‚Üí Store
  - [ ] Thumbnails generation
  - [ ] CDN integration (n·∫øu c√≥)
  - [ ] Update `lib/storage.ts` v√† `lib/image.ts`

- [ ] **A4.6** Test storage:
  - [ ] Test upload v·ªõi c√°c roles
  - [ ] Test download/view v·ªõi c√°c roles
  - [ ] Test path security
  - [ ] Test file type validation
  - [ ] Test size limits

**Deliverables:**
- `database/storage_setup.sql` - Storage setup (n·∫øu c√≥ th·ªÉ)
- `database/STORAGE.md` - Storage documentation
- Updated `lib/storage.ts` v·ªõi policies
- Test results

---

## PH·∫¶N B ‚Äì AUTH & ROLE SYSTEM (X∆Ø∆†NG S·ªêNG QUY·ªÄN)

### B1. Auth Flow chu·∫©n h√≥a

**M·ª•c ti√™u:** Chu·∫©n h√≥a authentication flows cho t·∫•t c·∫£ user types

**Danh m·ª•c:**

- [ ] **B1.1** User auth flow:
  - [ ] Registration flow
  - [ ] Login flow
  - [ ] Logout flow
  - [ ] Password reset flow
  - [ ] Session management
  - [ ] Token refresh
  - [ ] Verify implementation trong `contexts/UserSessionContext.tsx`

- [ ] **B1.2** Business owner auth flow:
  - [ ] Registration request ‚Üí Approval ‚Üí Invite ‚Üí First login
  - [ ] Business owner login
  - [ ] Link profile v·ªõi business
  - [ ] Verify implementation trong `contexts/BusinessAuthContext.tsx`
  - [ ] Verify Edge Function `approve-registration`

- [ ] **B1.3** Admin auth flow:
  - [ ] Admin login (Supabase Auth + admin_users table lookup)
  - [ ] Disable DEV quick login ·ªü production
  - [ ] Admin session management
  - [ ] Verify implementation trong `contexts/AdminContext.tsx`

- [ ] **B1.4** Token lifecycle:
  - [ ] Access token
  - [ ] Refresh token
  - [ ] Token expiry handling
  - [ ] Auto refresh logic

- [ ] **B1.5** Test auth flows:
  - [ ] Test user registration ‚Üí login ‚Üí logout
  - [ ] Test business registration ‚Üí approval ‚Üí invite ‚Üí login
  - [ ] Test admin login
  - [ ] Test password reset
  - [ ] Test session persistence

**Deliverables:**
- Updated auth contexts (n·∫øu c·∫ßn)
- Document auth flows trong `docs/AUTHENTICATION.md`
- Test results

---

### B2. Role & Permission Model

**M·ª•c ti√™u:** ƒê·ªãnh nghƒ©a r√µ r√†ng roles v√† permissions, mapping v·ªõi frontend v√† backend

**Danh m·ª•c:**

- [ ] **B2.1** Define roles:
  - [ ] `User` - Regular user
  - [ ] `BusinessOwner` - Business owner
  - [ ] `Staff` - Staff member (future, nh∆∞ng c·∫ßn define structure)
  - [ ] `Admin` - Full admin
  - [ ] `Moderator` - Limited admin
  - [ ] `Editor` - Content editor only

- [ ] **B2.2** Define permissions:
  - [ ] Map permissions v·ªõi `AdminPermissions` interface trong `types.ts`
  - [ ] Define business owner permissions
  - [ ] Define user permissions
  - [ ] Define staff permissions (future)

- [ ] **B2.3** Frontend guards:
  - [ ] `ProtectedRoute` component
  - [ ] `AdminProtectedRoute` component
  - [ ] Permission-based UI rendering
  - [ ] Verify t·∫•t c·∫£ routes c√≥ protection ƒë√∫ng

- [ ] **B2.4** Backend RLS mapping:
  - [ ] Map frontend roles v·ªõi RLS policies
  - [ ] Ensure RLS policies match role permissions
  - [ ] Document mapping

- [ ] **B2.5** Admin permissions JSON:
  - [ ] Verify `admin_users.permissions` JSONB structure
  - [ ] Default permissions cho m·ªói role
  - [ ] Permission presets trong `constants.ts`

**Deliverables:**
- `docs/ROLES_AND_PERMISSIONS.md` - Document roles v√† permissions
- Updated constants/permissions (n·∫øu c·∫ßn)
- Verify frontend guards
- Verify RLS mapping

---

### B3. Registration & Approval Flow (END-TO-END)

**M·ª•c ti√™u:** Ho√†n thi·ªán flow t·ª´ registration ƒë·∫øn business setup

**Danh m·ª•c:**

- [ ] **B3.1** Partner registration:
  - [ ] Form t·∫°i `/partner-registration`
  - [ ] Validation
  - [ ] Submit ‚Üí `registration_requests` table
  - [ ] Email notification cho admin
  - [ ] Verify `pages/PartnerRegistrationPage.tsx`

- [ ] **B3.2** Admin approve:
  - [ ] Admin xem registration requests
  - [ ] Admin approve/reject
  - [ ] Verify admin UI

- [ ] **B3.3** Edge Function `approve-registration`:
  - [ ] Review code trong `supabase/functions/approve-registration/index.ts`
  - [ ] Create business record
  - [ ] Invite user via Supabase Auth
  - [ ] Send templated email
  - [ ] Create profile
  - [ ] Link profile v·ªõi business
  - [ ] Update request status
  - [ ] Error handling & rollback
  - [ ] Test function

- [ ] **B3.4** Email invite:
  - [ ] Email template 'invite'
  - [ ] Invitation link
  - [ ] Email content
  - [ ] Test email sending

- [ ] **B3.5** First login:
  - [ ] User click invitation link
  - [ ] Set password
  - [ ] Login l·∫ßn ƒë·∫ßu
  - [ ] Redirect to onboarding

- [ ] **B3.6** Business onboarding wizard:
  - [ ] Wizard steps
  - [ ] Business profile setup
  - [ ] Initial services setup
  - [ ] Verify `components/BusinessOnboardingWizard.tsx`
  - [ ] Complete flow test

**Deliverables:**
- Tested registration ‚Üí approval ‚Üí invite ‚Üí first login ‚Üí onboarding flow
- Updated Edge Function (n·∫øu c·∫ßn)
- Email template
- Onboarding wizard ho√†n ch·ªânh

---

## PH·∫¶N C ‚Äì FRONTEND HO√ÄN THI·ªÜN (KH√îNG CH·ªà "C√ì UI")

### C1. Frontend Architecture Audit

**M·ª•c ti√™u:** Cleanup v√† chu·∫©n h√≥a frontend architecture

**Danh m·ª•c:**

- [ ] **C1.1** Context cleanup:
  - [ ] Review t·∫•t c·∫£ 26 contexts
  - [ ] Identify duplicated logic
  - [ ] Merge ho·∫∑c remove duplicate contexts
  - [ ] Optimize context providers tree
  - [ ] Document context responsibilities

- [ ] **C1.2** Data-fetch pattern:
  - [ ] Chu·∫©n h√≥a data fetching trong contexts
  - [ ] Loading states
  - [ ] Error handling
  - [ ] Refetch logic
  - [ ] Cache strategy (n·∫øu c√≥)

- [ ] **C1.3** Error boundary & loading state:
  - [ ] Error boundaries cho critical sections
  - [ ] Loading states consistent
  - [ ] Error messages user-friendly
  - [ ] Fallback UI

- [ ] **C1.4** Component structure:
  - [ ] Review component organization
  - [ ] Extract reusable components
  - [ ] Document component API

**Deliverables:**
- Cleaned up contexts
- Documented architecture trong `docs/FRONTEND_ARCHITECTURE.md`
- Error boundaries
- Consistent loading states

---

### C2. PUBLIC SITE (USER-FACING)

**M·ª•c ti√™u:** Ho√†n thi·ªán public-facing website

**Danh m·ª•c:**

- [ ] **C2.1** Homepage:
  - [ ] Hero slides (dynamic t·ª´ database)
  - [ ] Featured businesses section
  - [ ] Featured deals section
  - [ ] Featured blog section
  - [ ] Explore by location section
  - [ ] Newsletter signup
  - [ ] Recently viewed
  - [ ] Verify `pages/HomePage.tsx`
  - [ ] Test v·ªõi data th·∫≠t

- [ ] **C2.2** Directory search & filter:
  - [ ] Search functionality
  - [ ] Filter by category
  - [ ] Filter by location
  - [ ] Filter by tags
  - [ ] Sort options
  - [ ] Pagination
  - [ ] Map view
  - [ ] List view
  - [ ] Verify `pages/DirectoryPage.tsx`
  - [ ] Test search performance

- [ ] **C2.3** Business landing page:
  - [ ] Business detail page
  - [ ] Services listing
  - [ ] Deals/promotions
  - [ ] Gallery
  - [ ] Reviews & ratings
  - [ ] Team members
  - [ ] Business blog posts
  - [ ] Contact information
  - [ ] Map integration
  - [ ] Verify `pages/BusinessDetailPage.tsx`
  - [ ] Custom landing page (n·∫øu business c√≥ custom landing)

- [ ] **C2.4** Blog platform:
  - [ ] Blog list page
  - [ ] Blog post detail
  - [ ] Categories
  - [ ] Search
  - [ ] Comments
  - [ ] Related posts
  - [ ] Verify `pages/BlogListPage.tsx` v√† `pages/BlogPostPage.tsx`
  - [ ] Business blog posts
  - [ ] Verify `pages/BusinessPostPage.tsx`

- [ ] **C2.5** SEO, metadata, schema:
  - [ ] Meta tags cho m·ªói page
  - [ ] Open Graph tags
  - [ ] Twitter cards
  - [ ] Schema.org markup
  - [ ] Sitemap generation
  - [ ] Robots.txt
  - [ ] Canonical URLs
  - [ ] Slug optimization

- [ ] **C2.6** Other pages:
  - [ ] About page
  - [ ] Contact page
  - [ ] Login/Register pages
  - [ ] Reset password page
  - [ ] 404 page

**Deliverables:**
- T·∫•t c·∫£ public pages ho√†n ch·ªânh v√† test v·ªõi data th·∫≠t
- SEO optimization
- Performance optimization

---

### C3. BUSINESS DASHBOARD (CORE VALUE)

**M·ª•c ti√™u:** Ho√†n thi·ªán business dashboard v·ªõi t·∫•t c·∫£ modules

**Checklist cho m·ªói module:**

- [ ] **C3.1** Dashboard overview:
  - [ ] Statistics cards
  - [ ] Recent activities
  - [ ] Quick actions
  - [ ] Notifications
  - [ ] Verify `components/DashboardOverview.tsx`

- [ ] **C3.2** Profile editor:
  - [ ] Business info edit
  - [ ] Logo upload
  - [ ] Images upload
  - [ ] Categories selection
  - [ ] Location (address, GPS)
  - [ ] Working hours
  - [ ] Social links
  - [ ] SEO settings
  - [ ] Notification settings
  - [ ] Hero slides editor
  - [ ] Verify `components/BusinessProfileEditor.tsx`
  - [ ] Test save/update

- [ ] **C3.3** Landing page builder:
  - [ ] Custom landing page editor
  - [ ] Page sections
  - [ ] Layout editor
  - [ ] Preview
  - [ ] Publish
  - [ ] Verify `components/LayoutEditor.tsx` v√† `components/HomepageEditor.tsx`

- [ ] **C3.4** Services:
  - [ ] List services
  - [ ] Add service
  - [ ] Edit service
  - [ ] Delete service
  - [ ] Reorder services
  - [ ] Service images
  - [ ] Verify `components/ServicesManager.tsx`
  - [ ] Test CRUD operations

- [ ] **C3.5** Deals:
  - [ ] List deals
  - [ ] Add deal
  - [ ] Edit deal
  - [ ] Delete deal
  - [ ] Deal status (Active, Expired, Scheduled)
  - [ ] Deal images
  - [ ] Verify `components/DealsManager.tsx`
  - [ ] Test CRUD operations

- [ ] **C3.6** Media:
  - [ ] Gallery view
  - [ ] Upload images/videos
  - [ ] Delete media
  - [ ] Reorder media
  - [ ] Media categories
  - [ ] Image optimization
  - [ ] Verify `components/MediaLibrary.tsx`
  - [ ] Test upload/download

- [ ] **C3.7** Blog:
  - [ ] List blog posts
  - [ ] Create blog post (Draft/Published)
  - [ ] Edit blog post
  - [ ] Delete blog post
  - [ ] Rich text editor
  - [ ] Featured posts
  - [ ] SEO settings
  - [ ] Verify `components/BlogManager.tsx`
  - [ ] Test CRUD operations

- [ ] **C3.8** Reviews:
  - [ ] List reviews
  - [ ] Reply to reviews
  - [ ] Hide/show reviews
  - [ ] Rating statistics
  - [ ] Verify `components/ReviewsManager.tsx`
  - [ ] Test review management

- [ ] **C3.9** Booking:
  - [ ] List appointments
  - [ ] View appointment details
  - [ ] Confirm/cancel appointments
  - [ ] Calendar view
  - [ ] Filter by status
  - [ ] Verify `components/BookingsManager.tsx`
  - [ ] Test booking management

- [ ] **C3.10** Analytics:
  - [ ] Statistics dashboard
  - [ ] Page views
  - [ ] Contact clicks
  - [ ] Charts & graphs
  - [ ] Time series data
  - [ ] Verify `components/AnalyticsDashboard.tsx`
  - [ ] Test v·ªõi data th·∫≠t

- [ ] **C3.11** Membership & billing:
  - [ ] Current membership tier
  - [ ] Membership expiry
  - [ ] Upgrade/downgrade options
  - [ ] Order history
  - [ ] Payment methods
  - [ ] Invoice generation
  - [ ] Verify `components/MembershipAndBilling.tsx`
  - [ ] Test membership flow

- [ ] **C3.12** Support:
  - [ ] Support tickets list
  - [ ] Create ticket
  - [ ] View ticket details
  - [ ] Reply to tickets
  - [ ] Ticket status
  - [ ] Verify `components/BusinessSupportCenter.tsx`
  - [ ] Test support flow

- [ ] **C3.13** Settings:
  - [ ] Account settings
  - [ ] Password change
  - [ ] Email preferences
  - [ ] Verify `components/AccountSettings.tsx`
  - [ ] Test settings update

**Deliverables:**
- T·∫•t c·∫£ dashboard modules ho√†n ch·ªânh v√† test v·ªõi data th·∫≠t
- CRUD operations work correctly
- File uploads work correctly
- Data persistence verified

---

### C4. ADMIN PANEL (CONTROL TOWER)

**M·ª•c ti√™u:** Ho√†n thi·ªán admin panel v·ªõi permission-based UI

**Danh m·ª•c:**

- [ ] **C4.1** Admin auth:
  - [ ] Login page
  - [ ] Session management
  - [ ] Disable dev quick login in production
  - [ ] Verify `pages/AdminLoginPage.tsx`

- [ ] **C4.2** Permission-based UI:
  - [ ] Show/hide features based on permissions
  - [ ] Access denied messages
  - [ ] Verify t·∫•t c·∫£ admin features c√≥ permission check

- [ ] **C4.3** Dashboard:
  - [ ] Statistics overview
  - [ ] Recent activities
  - [ ] Quick actions
  - [ ] Verify `components/AdminDashboardOverview.tsx`

- [ ] **C4.4** Businesses management:
  - [ ] List businesses
  - [ ] View business details
  - [ ] Edit business
  - [ ] Delete business
  - [ ] Bulk import
  - [ ] Verify `components/BusinessManagementTable.tsx`
  - [ ] Test CRUD operations

- [ ] **C4.5** Orders:
  - [ ] List orders
  - [ ] View order details
  - [ ] Update order status
  - [ ] Verify order management
  - [ ] Test order workflow

- [ ] **C4.6** Packages:
  - [ ] List membership packages
  - [ ] Create package
  - [ ] Edit package
  - [ ] Delete package
  - [ ] Verify package management
  - [ ] Test CRUD operations

- [ ] **C4.7** Content:
  - [ ] Page content editor
  - [ ] Homepage editor
  - [ ] Blog management
  - [ ] Verify content management

- [ ] **C4.8** Homepage editor:
  - [ ] Hero slides editor
  - [ ] Sections configuration
  - [ ] Preview
  - [ ] Publish
  - [ ] Verify `components/HomepageEditor.tsx`

- [ ] **C4.9** Logs:
  - [ ] Activity log viewer
  - [ ] Email notifications log
  - [ ] Filter & search logs
  - [ ] Verify log viewers

- [ ] **C4.10** Support:
  - [ ] Support tickets management
  - [ ] Reply to tickets
  - [ ] Update ticket status
  - [ ] Verify `components/AdminSupportTickets.tsx`

- [ ] **C4.11** Tools:
  - [ ] Bulk import tool
  - [ ] API health check
  - [ ] Database tools (n·∫øu c√≥)
  - [ ] Verify admin tools

- [ ] **C4.12** Other admin features:
  - [ ] Users management
  - [ ] Admin users management
  - [ ] Registration requests
  - [ ] Announcements
  - [ ] System settings
  - [ ] Theme editor

**Deliverables:**
- T·∫•t c·∫£ admin features ho√†n ch·ªânh v√† test v·ªõi data th·∫≠t
- Permission-based UI working correctly
- All CRUD operations verified

---

## PH·∫¶N D ‚Äì DATA FLOW & LOGIC NGHI·ªÜP V·ª§

### D1. Membership & Billing Logic

**M·ª•c ti√™u:** Ho√†n thi·ªán membership v√† billing logic

**Danh m·ª•c:**

- [ ] **D1.1** Membership packages:
  - [ ] Define packages (Free, Premium, VIP)
  - [ ] Package features
  - [ ] Package permissions
  - [ ] Package pricing
  - [ ] Verify `membership_packages` table

- [ ] **D1.2** Quy·ªÅn theo g√≥i:
  - [ ] Map package ‚Üí permissions
  - [ ] Enforce permissions trong business features
  - [ ] Check permissions tr∆∞·ªõc khi allow actions

- [ ] **D1.3** Membership expiry:
  - [ ] Track expiry date
  - [ ] Notify before expiry
  - [ ] Handle expired memberships
  - [ ] Downgrade to Free khi h·∫øt h·∫°n

- [ ] **D1.4** Gia h·∫°n:
  - [ ] Renew membership
  - [ ] Extend expiry date
  - [ ] Update order status

- [ ] **D1.5** Upgrade/downgrade:
  - [ ] Upgrade flow
  - [ ] Downgrade flow
  - [ ] Prorated billing (n·∫øu c√≥)
  - [ ] Update permissions immediately

- [ ] **D1.6** Order lifecycle:
  - [ ] Create order
  - [ ] Payment (simulated ho·∫∑c real gateway)
  - [ ] Confirm order
  - [ ] Activate membership
  - [ ] Order status updates
  - [ ] Email notifications

**Deliverables:**
- Membership logic ho√†n ch·ªânh
- Billing logic ho√†n ch·ªânh
- Test membership workflows

---

### D2. Booking & Appointment Logic

**M·ª•c ti√™u:** Ho√†n thi·ªán booking v√† appointment logic

**Danh m·ª•c:**

- [ ] **D2.1** Appointment slots:
  - [ ] Slot availability
  - [ ] Service duration
  - [ ] Working hours
  - [ ] Blocked time slots

- [ ] **D2.2** Appointment status:
  - [ ] Pending ‚Üí Confirmed ‚Üí Completed
  - [ ] Cancelled flow
  - [ ] Status transitions

- [ ] **D2.3** Owner vs user:
  - [ ] User t·∫°o appointment
  - [ ] Owner xem appointments
  - [ ] Owner confirm/cancel
  - [ ] Permissions

- [ ] **D2.4** Notifications:
  - [ ] Email khi c√≥ appointment m·ªõi
  - [ ] Email khi appointment ƒë∆∞·ª£c confirm
  - [ ] Email khi appointment b·ªã cancel
  - [ ] In-app notifications

**Deliverables:**
- Booking logic ho√†n ch·ªânh
- Test booking workflows
- Email notifications working

---

### D3. Review & Rating System

**M·ª•c ti√™u:** Ho√†n thi·ªán review v√† rating system

**Danh m·ª•c:**

- [ ] **D3.1** Ai ƒë∆∞·ª£c review:
  - [ ] Logged-in users
  - [ ] One review per user per business
  - [ ] Business owners kh√¥ng ƒë∆∞·ª£c review business c·ªßa m√¨nh

- [ ] **D3.2** Ch·ªëng spam:
  - [ ] Rate limiting
  - [ ] Duplicate detection
  - [ ] Moderation (n·∫øu c·∫ßn)

- [ ] **D3.3** Reply logic:
  - [ ] Business owner reply
  - [ ] One reply per review
  - [ ] Reply notification

- [ ] **D3.4** Rating aggregation:
  - [ ] Calculate average rating
  - [ ] Update business.rating
  - [ ] Update business.review_count
  - [ ] Trigger khi c√≥ review m·ªõi/update/delete

**Deliverables:**
- Review system ho√†n ch·ªânh
- Rating aggregation working
- Test review workflows

---

## PH·∫¶N E ‚Äì EMAIL, NOTIFICATION, EDGE FUNCTIONS

### E1. Email System ho√†n ch·ªânh

**M·ª•c ti√™u:** Ho√†n thi·ªán email system v·ªõi t·∫•t c·∫£ templates

**Danh m·ª•c:**

- [ ] **E1.1** Email templates:
  - [ ] `invite` - Business registration invitation
  - [ ] `welcome` - Welcome email
  - [ ] `order_confirmation` - Order confirmation
  - [ ] `booking_confirmation` - Booking confirmation
  - [ ] `booking_cancelled` - Booking cancelled
  - [ ] `password_reset` - Password reset
  - [ ] `membership_expiry` - Membership expiry warning
  - [ ] `review_received` - New review notification
  - [ ] T·∫•t c·∫£ templates c√≥ HTML ƒë·∫πp, responsive

- [ ] **E1.2** Resend integration:
  - [ ] Verify Resend API setup
  - [ ] Verify RESEND_API_KEY
  - [ ] Test email sending
  - [ ] Error handling

- [ ] **E1.3** Trigger points:
  - [ ] Registration approval ‚Üí Send invite email
  - [ ] Order created ‚Üí Send confirmation email
  - [ ] Booking created ‚Üí Send confirmation email
  - [ ] Booking confirmed ‚Üí Send confirmation email
  - [ ] Booking cancelled ‚Üí Send cancellation email
  - [ ] Password reset ‚Üí Send reset email
  - [ ] Review received ‚Üí Send notification email
  - [ ] Membership expiring ‚Üí Send warning email

- [ ] **E1.4** Email testing:
  - [ ] Test t·∫•t c·∫£ email templates
  - [ ] Test v·ªõi real email addresses
  - [ ] Verify email delivery
  - [ ] Verify email content

**Deliverables:**
- T·∫•t c·∫£ email templates ho√†n ch·ªânh
- Email system working
- Test results

---

### E2. Edge Functions Audit

**M·ª•c ti√™u:** Audit v√† ho√†n thi·ªán t·∫•t c·∫£ Edge Functions

**Danh m·ª•c:**

- [ ] **E2.1** `approve-registration`:
  - [ ] Review code
  - [ ] Error handling
  - [ ] Rollback logic
  - [ ] Logging
  - [ ] Security
  - [ ] Test function

- [ ] **E2.2** `send-templated-email`:
  - [ ] Review code
  - [ ] Template system
  - [ ] Error handling
  - [ ] Logging
  - [ ] Security
  - [ ] Test function

- [ ] **E2.3** `create-admin-user`:
  - [ ] Review code
  - [ ] Error handling
  - [ ] Logging
  - [ ] Security
  - [ ] Test function

- [ ] **E2.4** `send-email`:
  - [ ] Review code (c√≥ th·ªÉ l√† duplicate c·ªßa send-templated-email)
  - [ ] Decide: keep or remove
  - [ ] Update n·∫øu c·∫ßn

- [ ] **E2.5** General Edge Functions improvements:
  - [ ] Consistent error handling
  - [ ] Consistent logging
  - [ ] Security best practices
  - [ ] CORS handling
  - [ ] Type safety

**Deliverables:**
- All Edge Functions reviewed v√† improved
- Test results
- Documentation

---

### E3. Notification System

**M·ª•c ti√™u:** Ho√†n thi·ªán notification system

**Danh m·ª•c:**

- [ ] **E3.1** In-app notifications:
  - [ ] Notification component
  - [ ] Notification storage (database ho·∫∑c in-memory)
  - [ ] Real-time notifications (Supabase Realtime)
  - [ ] Mark as read
  - [ ] Notification types

- [ ] **E3.2** Email notifications:
  - [ ] Integration v·ªõi email system
  - [ ] User preferences
  - [ ] Notification settings

- [ ] **E3.3** Admin alerts:
  - [ ] Admin notification system
  - [ ] Critical alerts
  - [ ] Daily/weekly summaries

**Deliverables:**
- Notification system working
- Test results

---

## PH·∫¶N F ‚Äì SEARCH, PERFORMANCE, SEO

### F1. Search System

**M·ª•c ti√™u:** Ho√†n thi·ªán search functionality

**Danh m·ª•c:**

- [ ] **F1.1** Business search:
  - [ ] Search algorithm
  - [ ] Full-text search (PostgreSQL)
  - [ ] Search by name, category, location, tags
  - [ ] Search ranking
  - [ ] Search suggestions
  - [ ] Verify `components/SearchBar.tsx`

- [ ] **F1.2** Blog search:
  - [ ] Search blog posts
  - [ ] Search by title, content, category
  - [ ] Full-text search

- [ ] **F1.3** Index strategy:
  - [ ] Database indexes cho search columns
  - [ ] GIN indexes cho full-text search (n·∫øu d√πng)
  - [ ] Verify indexes trong schema

- [ ] **F1.4** Search performance:
  - [ ] Test search performance
  - [ ] Optimize queries
  - [ ] Pagination

**Deliverables:**
- Search system ho√†n ch·ªânh
- Performance optimized
- Test results

---

### F2. Performance Optimization

**M·ª•c ti√™u:** Optimize performance c·ªßa ·ª©ng d·ª•ng

**Danh m·ª•c:**

- [ ] **F2.1** Query optimization:
  - [ ] Review slow queries
  - [ ] Add indexes
  - [ ] Optimize joins
  - [ ] Use select specific columns
  - [ ] Pagination

- [ ] **F2.2** Indexes:
  - [ ] Review indexes trong schema
  - [ ] Add missing indexes
  - [ ] Remove unused indexes
  - [ ] Verify index usage

- [ ] **F2.3** Pagination:
  - [ ] Implement pagination everywhere c·∫ßn thi·∫øt
  - [ ] Consistent pagination UI
  - [ ] Infinite scroll ho·∫∑c page-based

- [ ] **F2.4** Image lazy loading:
  - [ ] Lazy load images
  - [ ] Placeholder images
  - [ ] Image optimization
  - [ ] CDN (n·∫øu c√≥)

- [ ] **F2.5** Cache strategy:
  - [ ] Frontend caching (n·∫øu c·∫ßn)
  - [ ] API response caching (n·∫øu c·∫ßn)
  - [ ] Static asset caching

**Deliverables:**
- Performance optimized
- Test results (load times, query times)

---

### F3. SEO & DISCOVERABILITY

**M·ª•c ti√™u:** Optimize SEO v√† discoverability

**Danh m·ª•c:**

- [ ] **F3.1** Meta tags:
  - [ ] Title tags cho m·ªói page
  - [ ] Meta description
  - [ ] Meta keywords (optional)
  - [ ] Dynamic meta tags

- [ ] **F3.2** Schema.org:
  - [ ] Business schema
  - [ ] Blog post schema
  - [ ] Review schema
  - [ ] Organization schema

- [ ] **F3.3** OpenGraph:
  - [ ] OG tags cho m·ªói page
  - [ ] OG images
  - [ ] Social sharing

- [ ] **F3.4** Sitemap:
  - [ ] Generate sitemap.xml
  - [ ] Include all public pages
  - [ ] Update sitemap dynamically

- [ ] **F3.5** Robots.txt:
  - [ ] Create robots.txt
  - [ ] Allow/disallow rules

- [ ] **F3.6** Canonical URLs:
  - [ ] Canonical tags
  - [ ] Avoid duplicate content

- [ ] **F3.7** Slugs:
  - [ ] SEO-friendly slugs
  - [ ] Slug uniqueness
  - [ ] Slug generation

**Deliverables:**
- SEO optimized
- Sitemap generated
- Robots.txt created
- Test results

---

## PH·∫¶N G ‚Äì QUALITY, TESTING, SAFETY NET

### G1. Testing Strategy

**M·ª•c ti√™u:** Setup testing v√† vi·∫øt tests

**Danh m·ª•c:**

- [ ] **G1.1** Setup testing framework:
  - [ ] Install testing libraries (Jest, React Testing Library, etc.)
  - [ ] Setup test configuration
  - [ ] Setup test scripts

- [ ] **G1.2** Unit tests:
  - [ ] Test utility functions
  - [ ] Test components (critical ones)
  - [ ] Test contexts (critical ones)

- [ ] **G1.3** Integration tests:
  - [ ] Test auth flows
  - [ ] Test CRUD operations
  - [ ] Test business workflows

- [ ] **G1.4** Auth & RLS tests:
  - [ ] Test RLS policies
  - [ ] Test role permissions
  - [ ] Test unauthorized access

- [ ] **G1.5** Regression tests:
  - [ ] Test critical paths
  - [ ] Test edge cases
  - [ ] Test error cases

**Deliverables:**
- Testing framework setup
- Test suite (√≠t nh·∫•t cho critical paths)
- Test results

---

### G2. Error Handling & Monitoring

**M·ª•c ti√™u:** Setup error handling v√† monitoring

**Danh m·ª•c:**

- [ ] **G2.1** Frontend error boundary:
  - [ ] Error boundary components
  - [ ] Error logging
  - [ ] User-friendly error messages
  - [ ] Error reporting (n·∫øu c√≥)

- [ ] **G2.2** Backend logging:
  - [ ] Edge Functions logging
  - [ ] Error logging
  - [ ] Request logging

- [ ] **G2.3** Supabase logs:
  - [ ] Review Supabase logs
  - [ ] Setup log monitoring
  - [ ] Error alerts

- [ ] **G2.4** Alerts:
  - [ ] Critical error alerts
  - [ ] Performance alerts
  - [ ] Security alerts

**Deliverables:**
- Error handling implemented
- Logging setup
- Monitoring setup

---

## PH·∫¶N H ‚Äì DEPLOYMENT & PRODUCTION READINESS

### H1. Environment Management

**M·ª•c ti√™u:** Chu·∫©n h√≥a environment management

**Danh m·ª•c:**

- [ ] **H1.1** .env.example:
  - [ ] Create .env.example file
  - [ ] List all environment variables
  - [ ] Document each variable
  - [ ] No secrets in .env.example

- [ ] **H1.2** Vercel env:
  - [ ] Setup environment variables tr√™n Vercel
  - [ ] Production env
  - [ ] Preview env (n·∫øu c√≥)
  - [ ] Verify env variables

- [ ] **H1.3** Supabase secrets:
  - [ ] Setup Edge Functions secrets
  - [ ] RESEND_API_KEY
  - [ ] Other secrets
  - [ ] Verify secrets

- [ ] **H1.4** Documentation:
  - [ ] Document environment setup
  - [ ] Document deployment process

**Deliverables:**
- .env.example file
- Environment setup documentation
- All env variables configured

---

### H2. Deployment Checklist

**M·ª•c ti√™u:** Checklist ƒë·ªÉ deploy production

**Danh m·ª•c:**

- [ ] **H2.1** Build:
  - [ ] Frontend build succeeds
  - [ ] No build errors
  - [ ] No build warnings (critical ones)
  - [ ] Build size optimized

- [ ] **H2.2** DB migrate:
  - [ ] Run migrations
  - [ ] Verify schema
  - [ ] Verify RLS policies
  - [ ] Verify data (n·∫øu c√≥)

- [ ] **H2.3** Functions deploy:
  - [ ] Deploy Edge Functions
  - [ ] Verify functions work
  - [ ] Test functions

- [ ] **H2.4** Storage setup:
  - [ ] Create storage buckets
  - [ ] Setup storage policies
  - [ ] Test upload/download

- [ ] **H2.5** Domain:
  - [ ] Setup domain
  - [ ] DNS configuration
  - [ ] Verify domain

- [ ] **H2.6** SSL:
  - [ ] SSL certificate (Vercel auto)
  - [ ] Verify HTTPS

- [ ] **H2.7** Final checks:
  - [ ] Test production site
  - [ ] Test all critical paths
  - [ ] Test on different devices
  - [ ] Performance check
  - [ ] SEO check

**Deliverables:**
- Production deployment successful
- All checks passed
- Production site working

---

### H3. Backup & Recovery

**M·ª•c ti√™u:** Setup backup v√† recovery plan

**Danh m·ª•c:**

- [ ] **H3.1** DB backup:
  - [ ] Setup automated backups
  - [ ] Backup frequency
  - [ ] Backup retention
  - [ ] Test restore

- [ ] **H3.2** Storage backup:
  - [ ] Storage backup strategy
  - [ ] Backup frequency
  - [ ] Test restore

- [ ] **H3.3** Rollback plan:
  - [ ] Code rollback procedure
  - [ ] Database rollback procedure
  - [ ] Document rollback process

**Deliverables:**
- Backup strategy implemented
- Recovery plan documented
- Test backup/restore

---

## üìä T·ªîNG K·∫æT

**T·ªïng s·ªë m·ª•c:** ~200+ tasks  
**Estimated timeline:** 4-6 tu·∫ßn (t√πy team size)  
**Priority order:** A ‚Üí B ‚Üí C ‚Üí D ‚Üí E ‚Üí F ‚Üí G ‚Üí H

**‚ö†Ô∏è L∆ØU √ù:**
- Kh√¥ng ƒë∆∞·ª£c l√†m l·ªách th·ª© t·ª±
- M·ªói m·ª•c ph·∫£i ho√†n thi·ªán 100% tr∆∞·ªõc khi chuy·ªÉn sang m·ª•c ti·∫øp theo
- C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô v√†o `TIEN_DO_HOAN_THIEN.md` sau m·ªói m·ª•c ho√†n th√†nh
- B√°o l·ªói ngay n·∫øu ph√°t hi·ªán sai s√≥t

---

**Master Plan Version:** 1.0  
**Last Updated:** $(date)  
**Status:** Ready for implementation

